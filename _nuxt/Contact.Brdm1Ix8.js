import{p as T,r as x,q as v,o as n,a as l,s as N,d as t,t as f,v as _,x as g,b as M,f as C,h as V,y as d,e as w,z as u,F as b,j as S,A as k,l as j}from"./entry.kNh3a2ls.js";const $={class:"input-group"},A=t("label",{for:"name",class:"rvt-label"},"Name",-1),B={class:"input-group"},O=t("label",{for:"email",class:"rvt-label"},"Email",-1),D={class:"input-group"},I=t("label",{for:"message",class:"rvt-label"},"Yor message",-1),L={key:0,class:"rvt-m-left-sm spinner"},R={key:1,class:"confirmation",id:"confirmation",ref:"confirmation"},P=t("h3",{class:"rvt-ts-md rvt-m-top-md bordered-heading"},"Thank you for contacting NCRAD",-1),U=t("p",{class:"rvt-m-all-none"},"The following information was sent:",-1),q={class:"rvt-table-stripes rvt-m-tb-md rvt-table-cells"},z={scope:"row",class:"rvt-text-medium"},J={key:2,class:"rvt-alert rvt-alert--danger [ rvt-m-top-md ]",role:"alert","aria-labelledby":"error-alert-title","data-rvt-alert":"error"},X={class:"rvt-alert__message"},Y=t("button",{class:"rvt-alert__dismiss","data-rvt-alert-close":""},[t("span",{class:"rvt-sr-only"},"Dismiss this alert"),t("svg",{fill:"currentColor",width:"16",height:"16",viewBox:"0 0 16 16"},[t("path",{d:"m3.5 2.086 4.5 4.5 4.5-4.5L13.914 3.5 9.414 8l4.5 4.5-1.414 1.414-4.5-4.5-4.5 4.5L2.086 12.5l4.5-4.5-4.5-4.5L3.5 2.086Z"})])],-1),H={__name:"Contact",setup(Z){T(()=>{k().$recaptcha.init()});const h=x(null),m=x(!1),r=v({status:"",message:"",data:null}),a=v({FormType:"Contact",Name:"",Email:"",Message:""}),i=v({Family_Number:!0,Name:!0,Email:!0,Message:!0}),c=s=>{i[s]=!!a[s]},y=async()=>{if(Object.keys(a).forEach(c),Object.values(i).every(s=>s)){m.value=!0;try{const e=await(await fetch("ncrad-api/contact.php",{method:"POST",headers:{"Content-Type":"application/json","X-Recaptcha-Token":await k().$recaptcha.execute("submit")},body:JSON.stringify(a)})).json();r.status=e.status,r.message=e.message,r.data=e.data,m.value=!1,e.status==="success"&&(F(),h.value.scrollIntoView({behavior:"smooth",block:"start"}))}catch(s){m.value=!1,console.error("Failed to submit form:",s)}}else await new Promise(s=>setTimeout(s,0)),alert("Some required fields were left blank. Please fill out remaining fields highlighted in red.")},F=()=>{Object.keys(a).forEach(s=>{["FormType"].includes(s)||(a[s]="",i[s]=!0)})};return(s,e)=>{const E=j;return n(),l(b,null,[r.status!=="success"?(n(),l("form",{key:0,class:"form",ref_key:"formRef",ref:h,onSubmit:N(y,["prevent"])},[t("div",$,[A,f(t("input",{type:"text",id:"name",class:g(["rvt-text-input",{"rvt-validation-danger":!i.Name}]),"onUpdate:modelValue":e[0]||(e[0]=o=>a.Name=o),name:"Name",onInput:e[1]||(e[1]=o=>c("Name"))},null,34),[[_,a.Name]])]),t("div",B,[O,f(t("input",{type:"email",id:"email",class:g(["rvt-text-input",{"rvt-validation-danger":!i.Email}]),"onUpdate:modelValue":e[2]||(e[2]=o=>a.Email=o),name:"Email",onInput:e[3]||(e[3]=o=>c("Email"))},null,34),[[_,a.Email]])]),t("div",D,[I,f(t("textarea",{id:"message",class:g(["rvt-textarea",{"rvt-validation-danger":!i.Message}]),name:"Message","onUpdate:modelValue":e[4]||(e[4]=o=>a.Message=o),onInput:e[5]||(e[5]=o=>c("Message"))},null,34),[[_,a.Message]])]),M(E,{class:"rvt-button",type:"submit",onClick:N(y,["prevent"]),disabled:!0},{default:C(()=>[V(d(w(m)?"Submitting Form":"Submit Form")+" ",1),w(m)?(n(),l("span",L)):u("",!0)]),_:1})],544)):u("",!0),r.status==="success"?(n(),l("div",R,[P,U,t("table",q,[(n(!0),l(b,null,S(r.data,(o,p)=>(n(),l(b,null,[p!=="FormType"?(n(),l("tr",{key:p},[t("th",z,d(p),1),t("td",null,d(o),1)])):u("",!0)],64))),256))])],512)):u("",!0),r.status==="error"?(n(),l("div",J,[t("p",X,d(r.message),1),Y])):u("",!0)],64)}}};export{H as default};
